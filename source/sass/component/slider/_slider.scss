//
// @name Slider
// @description <span class="label label-theme">JavaScript dependent</span> Sliding content.
// @author Kristoffer Svanmark, Sebastian Thulin
//
// @page Special/Slider
//
// @state .slider-nav-hover - Only show slider nav buttons on slider hover (wrapping element)
// @state .slider-nav-bottom - Only show slider nav buttons in the bottom of the slider (wrapping element)
//
// @state .text-block-center - You can center the text in the text block by adding this class to text-block element
// @state .text-block-left - Text on a solid white background, image to the right.
// @state .text-block-right - Text on a solid white background, image to the left.
//
// @markup
// <div class="slider slider-nav-bottom slider-nav-hover">
//     <ul>
//         <li class="type-featured current">
//              <a href="#">
//                 <span class="text-block text-block-left">
//                    <span>
//                        <em class="title block-level h1">Ipsum Fermentum Euismod</em>
//                        Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.
//                    </span>
//                  </span>
//                  <div class="slider-image slider-image-desktop hidden-xs hidden-sm" style="background-image:url(https:\/\/unsplash.it/800/800/?image=499)"></div>
//                  <div class="slider-image slider-image-mobile hidden-md hidden-lg" style="background-image:url(https:\/\/unsplash.it/800/800/?image=500)"></div>
//              </a>
//         </li>
//         <li class="type-featured">
//              <span class="text-block text-block-right">
//                  <span>
//                      <em class="title block-level h1">Amet Ornare Bibendum</em>
//                      Donec id elit non mi porta gravida at eget metus. Donec ullamcorper nulla non metus auctor fringilla.
//                  </span>
//              </span>
//              <div class="slider-image slider-image-desktop hidden-xs hidden-sm" style="background-image:url(https:\/\/unsplash.it/800/800/?image=499)"></div>
//              <div class="slider-image slider-image-mobile hidden-md hidden-lg" style="background-image:url(https:\/\/unsplash.it/800/800/?image=500)"></div>
//         </li>
//         <li class="type-image has-text-block">
//              <span class="text-block text-block-center">
//                  <span>
//                      <em class="title text-xl block-level">Ipsum Fermentum Euismod</em>
//                      Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.
//                  </span>
//              </span>
//              <div class="slider-image slider-image-desktop hidden-xs hidden-sm" style="background-image:url(https:\/\/unsplash.it/800/800/?image=496)"></div>
//              <div class="slider-image slider-image-mobile hidden-md hidden-lg" style="background-image:url(https:\/\/unsplash.it/800/800/?image=498)"></div>
//         </li>
//         <li><div class="slider-image" style="background-image:url('https:\/\/unsplash.it/800/800/?image=493');"></div></li>
//         <li><div class="slider-image" style="background-image:url('https:\/\/unsplash.it/800/800/?image=976');"></div></li>
//         <li><div class="slider-image player" style="background-image:url('https:\/\/unsplash.it/800/800/?image=889');"><a href="#video-player-101935278" data-video-id="101935278"></a></div></li>
//     </ul>
// </div>
//
.slider {
    position: relative;
    width: 100%;
    height: 100%;
    min-height: 350px;
    background: #000;
    overflow: hidden;

    li {
        display: none;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
    }

    li.current:not(.type-featured) {
        display: block;
    }

    .type-featured {

        flex-flow: row wrap;
        height: 100%;

        &.current {
            display: flex;
        }

        &.is-collapsed {
            .text-block.text-block-left,
            .text-block.text-block-right {
                @include cover();
                opacity: .9;
            }
        }

        > a {
            display: flex;
            height: 100%;
            width: 100%;

            &:hover {
                text-decoration: none;
            }
        }

        .slider-image-desktop,
        .slider-image-mobile,
        .text-block {
            position: relative;
            flex: 1 0 auto;
            flex-basis: 350px;
        }

        .text-block.text-block-right ~ .slider-image-desktop,
        .text-block.text-block-right ~ .slider-image-mobile {
            order: 1;
        }

        .text-block.text-block-right {
            order: 2;
        }

    }

    .slider-image,
    .slider-video,
    .player {
        position: relative;
        z-index: 1;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center center;

        video {
            width: 100%;
            height: auto;
            @include center();

            @media screen and (orientation: portrait) {
                width: auto;
                height: 100%;
            }
        }
    }

    [class*="slider-nav-"] {
        @include center(false, true);
        z-index: 100;

        padding: .5em .8em;

        background-color: rgba(#000,.8);
        border: 0;
        apperance: none;
        transition: 200ms opacity cubic-bezier(.35,.21,.07,.87), 100ms background-color cubic-bezier(.35,.21,.07,.87), 100ms color cubic-bezier(.35,.21,.07,.87), 100ms transform cubic-bezier(.35,.21,.07,.87);

        font-size: 1.2em;
        font-weight: bold;
        text-align: center;
        line-height: 1;
        color: #fff;

        &:hover {
            // Color theme styles
            @if ($includeThemes == true) {
                @each $theme, $color in $themes {
                    .theme-#{$theme} &:not([class*="stripe-"]) {
                        background-color: map-get($color, second);
                    }
                }
            }
        }
    }

    .slider-nav-next {
        right: 0;
        border-radius: 50px 0 0 50px;
        padding-left: 1.2em;
        cursor: pointer;
    }

    .slider-nav-previous {
        left: 0;
        border-radius: 0 50px 50px 0;
        padding-right: 1.2em;
        cursor: pointer;
    }

    .content {
        transform: translateY(-32%) !important;
    }

    .text-block {
        padding: $grid-gutter-sm ($grid-gutter-md/3)*2;
        position: absolute;
        @include cover();
        top: auto;
        z-index: 2;
        background-color: rgba(#000, .7); //default
        color: #fff;
        font-size: .9em;
        display: block;

        &.text-block-center {
            background-color: rgba(#000, .4);
            text-align: center;
            padding: 0;
            top: 0;

            span {
                font-weight: 300;
                font-size: 2em;
                line-height: 1.3;
                text-shadow: 0 0 20px #000;
                padding: 0;
                width: 85%;
                max-width: $screen-md-max;
                @include center();

                em {
                    margin-bottom: $grid-gutter-xs;
                    font-weight: normal;
                }
            }

            /* Small devices */
            @media screen and (max-width: $screen-xs-max) {
                span {
                    font-size: 1.1em;
                    em {
                        font-size: 1.2em;
                    }
                }
            }

            @media screen and (min-width: $screen-sm-min) and (max-width: $screen-sm-max) {
                span {
                    font-size: 1.4em;
                    em {
                        font-size: 1.2em;
                    }
                }
            }

            @media screen and (min-width: $screen-md-min) and (max-width: $screen-md-max) {
                span {
                    font-size: 1.6em;
                    em {
                        font-size: 1.2em;
                    }
                }
            }
        }

        // Color theme styles
        @if ($includeThemes == true) {
            @each $theme, $color in $themes {
                .theme-#{$theme} &:not([class*="stripe-"]) {
                    background-color: rgba(map-get($color, second),.9);

                    &.text-block-center {
                        background-color: rgba(#000, .4) !important;
                    }

                    &.text-block-left,
                    &.text-block-right {
                        background-color: $creamy;
                        border: 1px solid $creamy-darker;
                        span {
                            color: $base-font-color;

                            h1,.h1,
                            h2,.h2,
                            h3,.h3,
                            h4,.h4,
                            h5,.h5,
                            h6,.h6 {
                                color: map-get($color, default);
                            }
                        }
                    }
                }
            }
        }

        .creamy {
            &.text-block-left,
            &.text-block-right {
                background-color: #ffffff;
                border-color: $creamy;
            }
        }
    }
}

.no-js .slider {
    li:first-child {
        display: block;
    }

    .type-video {
        a {
            display: none;
        }
    }
}

.slider-nav-hover {
    [class*="slider-nav-"] {
        opacity: 0;
    }

    &:hover {
        [class*="slider-nav-"] {
            opacity: 1;
        }
    }
}

.slider-nav-bottom {
    [class*="slider-nav-"] {
        top: auto;
        bottom: 0;
        border-radius: 0;
        transform: none;
        padding: .8em 1em;
        color: darken($creamy-darker,40%);
        background-color: darken($creamy,5%);

        &:hover {
            color: #fff;
        }
    }
}
